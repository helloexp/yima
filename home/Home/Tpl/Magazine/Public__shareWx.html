<script type="text/javascript" src="__PUBLIC__/Label/Js/jweixin-1.0.0.js?v=__VR__"></script>
<script>
    var wxShareData = (typeof(wxShareData) != 'undefined') ? wxShareData : {
        config:{}
    };
    wx.config({
        debug: false,
        appId: wxShareData.config.appId,
        timestamp: wxShareData.config.timestamp,
        nonceStr: wxShareData.config.nonceStr,
        signature: wxShareData.config.signature,
        jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'onMenuShareQQ',
            'onMenuShareWeibo',
            'hideMenuItems',
            'showMenuItems',
            'hideAllNonBaseMenuItem',
            'showAllNonBaseMenuItem',
            'translateVoice',
            'startRecord',
            'stopRecord',
            'onRecordEnd',
            'playVoice',
            'pauseVoice',
            'stopVoice',
            'uploadVoice',
            'downloadVoice',
            'chooseImage',
            'previewImage',
            'uploadImage',
            'downloadImage',
            'getNetworkType',
            'openLocation',
            'getLocation',
            'hideOptionMenu',
            'showOptionMenu',
            'closeWindow',
            'scanQRCode',
            'chooseWXPay',
            'openProductSpecificView',
            'addCard',
            'chooseCard',
            'openCard'
        ]
    });
    wx.error(function(res){
        for(var i in res){
            alert(i+':'+res[i]);
        }
    });
    wx.ready(function () {
        // 在这里调用 API
        wx.onMenuShareAppMessage({
            title: wxShareData.title, // 分享标题
            desc: wxShareData.desc, // 分享描述
            link: wxShareData.link, // 分享链接
            imgUrl: wxShareData.imgUrl, // 分享图标
            success: function (res) {
                // 用户确认分享后执行的回调函数
                if(typeof(wxShareData.ShareAppMessageSuccess) == 'string' && wxShareData.ShareAppMessageSuccess != ''){
                    window[wxShareData.ShareAppMessageSuccess].call(this,res);
                }else if(typeof(wxShareData.ShareAppMessageSuccess) == 'function'){
                    wxShareData.ShareAppMessageSuccess.call(this,res);
                }
            },
            cancel: function (res) {
                // 用户取消分享后执行的回调函数
                if(typeof(wxShareData.ShareAppMessageCancel) == 'string' && wxShareData.ShareAppMessageCancel != ''){
                    window[wxShareData.ShareAppMessageCancel].call(this,res);
                }else if(typeof(wxShareData.ShareAppMessageCancel) == 'function'){
                    wxShareData.ShareAppMessageCancel.call(this,res);
                }
            }
        });
        wx.onMenuShareTimeline({
            title: typeof wxShareData.title1 != 'undefined' ? wxShareData.title1 : wxShareData.title, // 分享标题
            desc: wxShareData.desc, // 分享描述
            link: wxShareData.link, // 分享链接
            imgUrl: wxShareData.imgUrl, // 分享图标
            success: function (res) {
                // 用户确认分享后执行的回调函数
                if(typeof(wxShareData.ShareTimelineSuccess) == 'string' && wxShareData.ShareTimelineSuccess != ''){
                    window[wxShareData.ShareTimelineSuccess].call(this,res);
                }else if(typeof(wxShareData.ShareTimelineSuccess) == 'function'){
                    wxShareData.ShareTimelineSuccess.call(this,res);
                }
            },
            cancel: function (res) {
                // 用户取消分享后执行的回调函数
                if(typeof(wxShareData.ShareTimelineCancel) == 'string' && wxShareData.ShareTimelineCancel != ''){
                    window[wxShareData.ShareTimelineCancel].call(this,res);
                }else if(typeof(wxShareData.ShareTimelineCancel) == 'function'){
                    wxShareData.ShareTimelineCancel.call(this,res);
                }
            }
        });
    });

</script>