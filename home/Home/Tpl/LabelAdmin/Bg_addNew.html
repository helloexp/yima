<ul>
    <li class="Gname"><span>*</span>活动页面风格</li>
    <li class="Ginput" style="width:500px;">
        <input type="text" id="page_style" name="page_style" class="dn" value="1">
        <img src="__PUBLIC__/Image/wapimg/set_main_one.png" class="set_main" data-type="1">
        <img src="__PUBLIC__/Image/wapimg/set_main_two.png" class="set_main ml10" data-type="2">
        <img src="__PUBLIC__/Image/wapimg/set_main_four.png" class="set_main ml10" data-type="4">
        <img src="__PUBLIC__/Image/wapimg/set_main_five.png" class="set_main ml10" data-type="5">
        <!--img src="__PUBLIC__/Image/wapimg/set_main_three.png" class="set_main ml10" data-type="3"/-->
    </li>
</ul>
<ul id="choosebg">
    <li class="Gname"><span>*</span>活动页背景图</li>
    <li class="Ginput" style="width:500px;">
        <input value="__PUBLIC__/Image/wapimg/topbg-sOne.png" type="text" id="set_bg" name="set_bg" class="dn">
        <img src="__PUBLIC__/Image/wapimg/topbg-sOne.png" class="set_bg_img"  data-type="1">
        <img src="__PUBLIC__/Image/wapimg/topbg-sTwo.png" class="set_bg_img ml10" data-type="2">
        <img src="__PUBLIC__/Image/wapimg/topbg-sFour.png" class="set_bg_img ml10" data-type="5">
        <!--img src="__PUBLIC__/Image/wapimg/topbg-sThree.png" class="set_bg_img ml10" data-type="4"/-->
        <img src="" id="add_set_bg_img" class="set_bg_img ml10 dn" data-type="3">
        <input type="hidden" name="bg_style" id="bg_style" value="1">
        <div class="add_set_bg ml10" onclick="add()">
            <input type="hidden" value="" name="resp_bg_img" id="resp_bg_img">
            <input type="hidden" id="reset_bg" name="reset_bg" value="0">
        </div>
    </li>
</ul>
<ul id="choosecolor" class="dn">
    <li class="Gname"><span>*</span>活动页背景色</li>
    <li class="Ginput" style="width:500px;">
    	<div class="Sselect">
            <input type="hidden" name="card_color" class="view-color" value="ModbgColor2">
            <div class="SselectInput">
                <span><i class="ModbgColor2"></i></span>
                <a href="javascript:void(0)"></a>
            </div>
            <ul>
                <li data-val="ModbgColor1"><i class="ModbgColor1"></i></li>
                <li data-val="ModbgColor2"><i class="ModbgColor2"></i></li>
                <li data-val="ModbgColor3"><i class="ModbgColor3"></i></li>
                <li data-val="ModbgColor4"><i class="ModbgColor4"></i></li>
                <li data-val="ModbgColor5"><i class="ModbgColor5"></i></li>
                <li data-val="ModbgColor6"><i class="ModbgColor6"></i></li>
                <li data-val="ModbgColor7"><i class="ModbgColor7"></i></li>
                <li data-val="ModbgColor8"><i class="ModbgColor8"></i></li>
                <li data-val="ModbgColor9"><i class="ModbgColor9"></i></li>
                <li data-val="ModbgColor10"><i class="ModbgColor10"></i></li>
                <li data-val="ModbgColor11"><i class="ModbgColor11"></i></li>
                <li data-val="ModbgColor15"><i class="ModbgColor15"></i></li>
                <li data-val="ModbgColor16"><i class="ModbgColor16"></i></li>
                <li data-val="ModbgColor12"><i class="ModbgColor12"></i></li>
                <li data-val="ModbgColor13"><i class="ModbgColor13"></i></li>
                <li data-val="ModbgColor14"><i class="ModbgColor14"></i></li>
                <li data-val="ModbgColor17"><i class="ModbgColor17"></i></li>
                <li data-val="ModbgColor18"><i class="ModbgColor18"></i></li>
                <li data-val="ModbgColor19"><i class="ModbgColor19"></i></li>
                <li data-val="ModbgColor20"><i class="ModbgColor20"></i></li>
            </ul>
            <div class="SselectBg"></div>
        </div>
    </li>
</ul>
<script>
$(document).ready(function(e) {
    $("body").on("click",".set_main",function(){
		var v = $(this).attr("data-type")*1;
		$("#page_style").val(v);
		$(".set_main").removeClass("set_main_hover");
		$(this).addClass("set_main_hover");
		$(".GphoneCon").attr("id","iphonePreview-"+v);
		$("#choosebg").show();
		$("#choosecolor").hide();
		// if(v==4){
		// 	$(".set_bg_img[data-type='"+v+"']").click();
		// }
		if(v==5){
			$("#choosebg").hide();
			$("#choosecolor").show();
			var color = $("[name='card_color']").val();
			$("#Preview-main").css("background",$("."+color).css("background-color"))
		}
	})
    $("body").on("click",".set_bg_img",function(){
		var v = $(this).attr("data-type")*1;
		var src = $(this).attr("src");
        $("#bg_style").val(v);
		$("#set_bg").val(src);
		$(".set_bg_img").removeClass("set_bg_img_hover");
		$(this).addClass("set_bg_img_hover");
		$(".Preview-vip-img").attr("src",src)
	})
	$("body").on("click",".Sselect>.SselectInput",function(){
        $(this).closest(".Sselect").toggleClass("hover");
    })
	$("body").on("click",".Sselect>.SselectBg",function(){
        $(this).closest(".Sselect").toggleClass("hover");
    })
	$("body").on("click",".Sselect>ul li",function(){
		var t = $(this);
		var s = $(this).closest(".Sselect");
		var v = t.attr("data-val");
		var color = t.find("i").css("background-color");
        s.find("span i").attr("class",v);
        s.find("input").val(v);
        s.toggleClass("hover");
		$("#Preview-main").css("background",color)
    });
	$(".set_main[data-type='"+$("[name='page_style']").val()+"']").click();
	$(".set_bg_img[data-type='"+$("[name='bg_style']").val()+"']").click();
});
function add(){
	var opt = {
		cropPresets:'640x340',
		callback:function(data){
			$(".add_set_bg").removeClass("ml10").addClass("mt10");
			$(".set_bg_img").removeClass("set_bg_img_hover");
			$('#add_set_bg_img').attr('src',data.src).addClass("set_bg_img_hover").show();
			$('#resp_bg_img').val(data.savename);
			$("#bg_style").val(3);
			$("#reset_bg").val(1);
			$("#set_bg").val(data.src);
			$(".Preview-vip-img").attr("src",data.src);
		}
	};
	open_img_uploader(opt);
}
</script>