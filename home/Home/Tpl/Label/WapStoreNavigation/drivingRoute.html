<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html {width: 100%;height: 100%; margin:0;font-family:"微软雅黑";}
        #l-map{height:300px;width:100%;}
        #r-result,#r-result table{width:100%;}
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.4&ak=WRzAu3DNewWB4oeOELaczjsM"></script>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Label/Css/wap_cbc.css?v=__VR__">
    <script type="text/javascript" src="__PUBLIC__/Label/Js/Util_tools.js?v=__VR__"></script>
    <title>导航</title>
</head>
<body>
<div id="wrapper">
    <div id="container">
        <div id="header" class="fn">
            <div class="goback" onclick="javascript:history.go(-1);"><i></i></div>
            <div class="logo"><span>导航</span></div>
        </div>
        <div id="main" style="padding: 50px 10px">
            <div id="l-map"></div>
            <div id="r-result"></div>
        </div>
    </div>
<div></div>
</body>
</html>
<script type="text/javascript">
    // 百度地图API功能
    var map = new BMap.Map("l-map");
    map.enableDragging();
    map.enableDoubleClickZoom();

    var driving = new BMap.DrivingRoute(map, {renderOptions: {map: map, panel: "r-result", autoViewport: true}});
    driving.setSearchCompleteCallback(function(result){
        if(result.getNumPlans() == 0){
            alert('没有查询到线路信息，点击确定返回');
            history.go(-1);
        }
    });
    driving.search(new BMap.Point({$start}), new BMap.Point({$end}));
</script>
